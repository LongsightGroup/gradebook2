<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    	<property name="mappings">
                        <map>
                                <entry key="/**/rpc/grades.rpc" value-ref="RPCService" />

                                <entry key="/**/importHandler" value-ref="GradebookImportService" />

                                <entry key="/**/exportGradebook.csv" value-ref="GradebookExportService" />

                                <entry key="/**/final-grade-submission" value-ref="GradebookFinalGradeSubmissionService" />

								<entry key="/gradebook/rest/**" value-ref="RestWrappingController" />

                                <entry key="/" value-ref="ResourceController" />
                                
                        </map>
        </property>
        <property name="defaultHandler">
            <bean class="org.sakaiproject.gradebook.gwt.server.DefaultFilenameHandler" />
        </property>
   	</bean>
   	
   	<!-- bean id="RestForwardingController" class="org.springframework.web.servlet.mvc.ServletForwardingController">
 		<property name="servletName"><value>sakai.gradebook.rest.filter</value></property>
 	</bean-->

	<bean id="RestWrappingController" class="org.springframework.web.servlet.mvc.ServletWrappingController">
   		<property name="servletClass">
     		<value>org.sakaiproject.gradebook.gwt.server.RestFilter</value>
   		</property>
  	 	<property name="servletName">
    		<value>sakai.gradebook.rest.servlet</value>
   		</property>
   		<property name="initParameters">
     	<props>
       		<prop key="com.sun.jersey.config.property.packages">managed</prop>
       		<prop key="com.sun.jersey.spi.container.ContainerRequestFilters">com.sun.jersey.api.container.filter.PostReplaceFilter</prop>
    	</props>
   		</property>
 	</bean>

</beans>
